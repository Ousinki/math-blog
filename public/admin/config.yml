backend:
  name: github
  repo: Ousinki/math-blog # 你的 GitHub 仓库（格式：用户名/仓库名）
  branch: main # 分支名称
  base_url: https://math-blog-6hw.pages.dev # 你的网站 URL（用于 OAuth 回调）
  auth_endpoint: /auth # Cloudflare Functions 端點

media_folder: "public/posts" # 统一上传目录
public_folder: "/posts" # 公共访问路径

# 本地开发时使用
local_backend: true

collections:
  - name: "posts" # 用于 Posts
    label: "Posts"
    folder: "src/content/post" # 存储位置
    create: true # 允许创建新文件
    slug: "{{slug}}" # 文件名基于 slug
    extension: mdx
    format: yaml-frontmatter
    # 视图过滤器 - 允许查看所有文章或只看草稿/已发布
    view_filters:
      - label: "所有文章"
        field: draft
        pattern: ""
      - label: "已发布"
        field: draft
        pattern: false
      - label: "草稿"
        field: draft
        pattern: true
    fields:
      - {
          label: "Title",
          name: "title",
          widget: "string",
          required: true,
          hint: "文章标题（最多 60 字符）",
        }
      - {
          label: "Description",
          name: "description",
          widget: "string",
          required: true,
          hint: "文章简短描述（50-160 字符）",
        }
      - {
          label: "Publish Date",
          name: "publishDate",
          widget: "datetime",
          required: true,
          format: "YYYY-MM-DD",
          date_format: "YYYY-MM-DD",
          time_format: false,
        }
      - {
          label: "Updated Date",
          name: "updatedDate",
          widget: "datetime",
          required: false,
          format: "YYYY-MM-DD",
          date_format: "YYYY-MM-DD",
          time_format: false,
        }
      - {
          label: "Tags",
          name: "tags",
          widget: "list",
          required: false,
          default: [],
          allow_add: true,
          hint: "输入标签后按回车添加",
        }
      - {
          label: "Draft",
          name: "draft",
          widget: "boolean",
          required: false,
          default: false,
          hint: "勾选表示草稿，不会在生产环境显示",
        }
      - {
          label: "Pinned",
          name: "pinned",
          widget: "boolean",
          required: false,
          default: false,
          hint: "勾选表示置顶文章",
        }
      - {
          label: "OG Image",
          name: "ogImage",
          widget: "string",
          required: false,
          hint: "社交媒体分享图片 URL（可选）",
        }
      - { label: "Body", name: "body", widget: "markdown", required: true }

  - name: "notes" # 用于 Notes
    label: "Notes"
    folder: "src/content/note"
    create: true
    slug: "{{slug}}"
    extension: md
    format: yaml-frontmatter
    fields:
      - { label: "Title", name: "title", widget: "string", required: true }
      - {
          label: "Description",
          name: "description",
          widget: "string",
          required: false,
          hint: "笔记描述（可选）",
        }
      - {
          label: "Publish Date",
          name: "publishDate",
          widget: "datetime",
          required: true,
          format: "YYYY-MM-DDTHH:mm:ssZ",
          date_format: "YYYY-MM-DD",
          time_format: "HH:mm:ss",
        }
      - { label: "Body", name: "body", widget: "markdown", required: true }
